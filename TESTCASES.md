# Тест-кейсы для API микросервиса объявлений

## Базовый URL: https://qa-internship.avito.com

---

## 1. Создание объявления (POST /api/1/item)

### TC-001: Успешное создание объявления с валидными данными
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос на `/api/1/item` с телом:
     ```json
     {
       "sellerID": 123456,
       "name": "Тестовое объявление",
       "price": 1000,
       "statistics": {
         "likes": 0,
         "viewCount": 0,
         "contacts": 0
       }
     }
     ```
- **Ожидаемый результат:**
  - Статус код: 200
  - Ответ содержит поля: id, sellerId, name, price, statistics, createdAt
  - id - уникальный идентификатор (UUID)
  - sellerId соответствует отправленному sellerID
  - name соответствует отправленному
  - price соответствует отправленному

### TC-002: Создание объявления без поля statistics
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос на `/api/1/item` с телом:
     ```json
     {
       "sellerID": 123456,
       "name": "Объявление без статистики",
       "price": 500
     }
     ```
- **Ожидаемый результат:**
  - Статус код: 200
  - Объявление создано успешно
  - statistics инициализирована значениями по умолчанию

### TC-003: Создание объявления с минимальной ценой (0)
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с price = 0
- **Ожидаемый результат:**
  - Статус код: 200
  - Объявление создано с ценой 0

### TC-004: Создание объявления с отрицательной ценой
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с price = -100
- **Ожидаемый результат:**
  - Статус код: 400
  - Сообщение об ошибке валидации

### TC-005: Создание объявления без обязательного поля sellerID
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос без поля sellerID
- **Ожидаемый результат:**
  - Статус код: 400
  - Сообщение об ошибке

### TC-006: Создание объявления без обязательного поля name
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос без поля name
- **Ожидаемый результат:**
  - Статус код: 400
  - Сообщение об ошибке

### TC-007: Создание объявления без обязательного поля price
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос без поля price
- **Ожидаемый результат:**
  - Статус код: 400
  - Сообщение об ошибке

### TC-008: Создание объявления с пустым телом запроса
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с пустым телом {}
- **Ожидаемый результат:**
  - Статус код: 400
  - Сообщение об ошибке

### TC-009: Создание объявления с невалидным JSON
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с невалидным JSON
- **Ожидаемый результат:**
  - Статус код: 400

### TC-010: Создание объявления с sellerID вне допустимого диапазона (< 111111)
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с sellerID = 100
- **Ожидаемый результат:**
  - Статус код: 400 или объявление создается (зависит от требований)

### TC-011: Создание объявления с очень длинным именем
- **Приоритет:** Низкий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с name длиной 10000 символов
- **Ожидаемый результат:**
  - Статус код: 400 или 200 (зависит от ограничений)

### TC-012: Создание объявления с пустым именем
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с name = ""
- **Ожидаемый результат:**
  - Статус код: 400

### TC-013: Создание объявления с sellerID строкового типа
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с sellerID = "abc"
- **Ожидаемый результат:**
  - Статус код: 400

### TC-014: Создание объявления с price строкового типа
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с price = "сто рублей"
- **Ожидаемый результат:**
  - Статус код: 400

---

## 2. Получение объявления по ID (GET /api/1/item/:id)

### TC-015: Успешное получение существующего объявления
- **Приоритет:** Высокий
- **Предусловия:** Создано объявление, известен его ID
- **Шаги:**
  1. Отправить GET запрос на `/api/1/item/{id}`
- **Ожидаемый результат:**
  - Статус код: 200
  - Ответ содержит корректные данные объявления
  - Все поля соответствуют созданному объявлению

### TC-016: Получение несуществующего объявления
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с несуществующим UUID
- **Ожидаемый результат:**
  - Статус код: 404
  - Сообщение о том, что объявление не найдено

### TC-017: Получение объявления с невалидным форматом ID
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с id = "invalid-id"
- **Ожидаемый результат:**
  - Статус код: 400

### TC-018: Получение объявления с пустым ID
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос на `/api/1/item/`
- **Ожидаемый результат:**
  - Статус код: 400 или 404

### TC-019: Получение объявления с ID содержащим спецсимволы
- **Приоритет:** Низкий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с id = "!@#$%"
- **Ожидаемый результат:**
  - Статус код: 400

---

## 3. Получение всех объявлений продавца (GET /api/1/:sellerID/item)

### TC-020: Успешное получение объявлений существующего продавца
- **Приоритет:** Высокий
- **Предусловия:** Создано несколько объявлений для одного sellerID
- **Шаги:**
  1. Отправить GET запрос на `/api/1/{sellerID}/item`
- **Ожидаемый результат:**
  - Статус код: 200
  - Массив объявлений данного продавца
  - Все объявления имеют правильный sellerId

### TC-021: Получение объявлений продавца без объявлений
- **Приоритет:** Средний
- **Предусловия:** sellerID без созданных объявлений
- **Шаги:**
  1. Отправить GET запрос с новым sellerID
- **Ожидаемый результат:**
  - Статус код: 200
  - Пустой массив []

### TC-022: Получение объявлений с невалидным sellerID (строка)
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с sellerID = "abc"
- **Ожидаемый результат:**
  - Статус код: 400

### TC-023: Получение объявлений с отрицательным sellerID
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с sellerID = -1
- **Ожидаемый результат:**
  - Статус код: 400 или пустой массив

### TC-024: Получение объявлений с sellerID = 0
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с sellerID = 0
- **Ожидаемый результат:**
  - Статус код: 400 или пустой массив

### TC-025: Проверка что возвращаются только объявления указанного продавца
- **Приоритет:** Высокий
- **Предусловия:** Созданы объявления для разных продавцов
- **Шаги:**
  1. Создать объявления для sellerID1 и sellerID2
  2. Запросить объявления sellerID1
- **Ожидаемый результат:**
  - Все объявления в ответе имеют sellerId = sellerID1

---

## 4. Получение статистики по объявлению (GET /api/1/statistic/:id или /api/2/statistic/:id)

### TC-026: Успешное получение статистики существующего объявления
- **Приоритет:** Высокий
- **Предусловия:** Создано объявление с известным ID
- **Шаги:**
  1. Отправить GET запрос на `/api/1/statistic/{id}`
- **Ожидаемый результат:**
  - Статус код: 200
  - Ответ содержит: likes, viewCount, contacts
  - Значения соответствуют статистике объявления

### TC-027: Получение статистики несуществующего объявления
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с несуществующим UUID
- **Ожидаемый результат:**
  - Статус код: 404

### TC-028: Получение статистики с невалидным ID
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить GET запрос с id = "invalid"
- **Ожидаемый результат:**
  - Статус код: 400

### TC-029: Проверка начальных значений статистики
- **Приоритет:** Средний
- **Предусловия:** Создано новое объявление
- **Шаги:**
  1. Создать объявление без указания statistics
  2. Получить статистику
- **Ожидаемый результат:**
  - likes, viewCount, contacts = 0 (или указанные при создании)

### TC-030: Получение статистики через API v2
- **Приоритет:** Средний
- **Предусловия:** Создано объявление
- **Шаги:**
  1. Отправить GET запрос на `/api/2/statistic/{id}`
- **Ожидаемый результат:**
  - Статус код: 200
  - Корректная статистика

---

## 5. Интеграционные тесты

### TC-031: Создание и последующее получение объявления
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Создать объявление
  2. Получить объявление по вернувшемуся ID
- **Ожидаемый результат:**
  - Данные полученного объявления соответствуют созданному

### TC-032: Создание нескольких объявлений и проверка списка продавца
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Создать 3 объявления для одного sellerID
  2. Получить список объявлений продавца
- **Ожидаемый результат:**
  - Список содержит все 3 созданных объявления

### TC-033: Проверка уникальности ID объявлений
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Создать несколько объявлений
  2. Сравнить их ID
- **Ожидаемый результат:**
  - Все ID уникальны

### TC-034: Проверка формата createdAt
- **Приоритет:** Низкий
- **Предусловия:** Нет
- **Шаги:**
  1. Создать объявление
  2. Проверить формат поля createdAt
- **Ожидаемый результат:**
  - createdAt в валидном формате даты/времени

---

## 6. Негативные тесты и граничные случаи

### TC-035: Отправка запроса с неверным Content-Type
- **Приоритет:** Низкий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с Content-Type: text/plain
- **Ожидаемый результат:**
  - Статус код: 400 или 415

### TC-036: Создание объявления с очень большим числом в price
- **Приоритет:** Низкий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с price = 99999999999999
- **Ожидаемый результат:**
  - Объявление создано или ошибка валидации

### TC-037: Создание объявления с дробной ценой
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с price = 99.99
- **Ожидаемый результат:**
  - Зависит от требований (округление или ошибка)

### TC-038: SQL-инъекция в поле name
- **Приоритет:** Высокий
- **Предусловия:** Нет
- **Шаги:**
  1. Отправить POST запрос с name = "'; DROP TABLE items;--"
- **Ожидаемый результат:**
  - Объявление создано с указанным именем
  - Система не повреждена

### TC-039: XSS в поле name
- **Приоритет:** Средний
- **Предусловия:** Нет
- **Шаги:**
  1. Создать объявление с name = "<script>alert('xss')</script>"
  2. Получить объявление
- **Ожидаемый результат:**
  - Данные экранированы или сохранены как есть (но не исполняются)